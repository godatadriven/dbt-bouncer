# type: ignore

# # generated by datamodel-codegen:
#   filename:  run-results-latest.json

from __future__ import annotations

from enum import Enum
from typing import Any

from pydantic import ConfigDict, Field

from dbt_artifacts_parser.parsers.base import BaseParserModel


class Metadata(BaseParserModel):
    model_config = ConfigDict(
        extra='allow',
    )
    dbt_schema_version: str
    dbt_version: str | None = '1.9.0a1'
    generated_at: str | None = None
    invocation_id: str | None = None
    env: dict[str, str] | None = None


class Status(Enum):
    success = 'success'
    error = 'error'
    no_op = "no-op"
    skipped = 'skipped'
    partial_success = 'partial success'


class Status1(Enum):
    pass_ = 'pass' # nosec
    error = 'error'
    fail = 'fail'
    warn = 'warn'
    skipped = 'skipped'


class Status2(Enum):
    pass_ = 'pass' # nosec
    warn = 'warn'
    error = 'error'
    runtime_error = 'runtime error'


class TimingItem(BaseParserModel):
    model_config = ConfigDict(
        extra='allow',
    )
    name: str
    started_at: str | None = None
    completed_at: str | None = None


class BatchResults(BaseParserModel):
    model_config = ConfigDict(
        extra='allow',
    )
    successful: list[list] | None = None
    failed: list[list] | None = None


class Result(BaseParserModel):
    model_config = ConfigDict(
        extra='allow',
    )
    status: Status | Status1 | Status2
    timing: list[TimingItem]
    thread_id: str
    execution_time: float
    adapter_response: dict[str, Any]
    message: str | None = None
    failures: int | None = None
    unique_id: str
    compiled: bool | None = None
    compiled_code: str | None = None
    relation_name: str | None = None
    batch_results: BatchResults | None = None


class RunResultsLatest(BaseParserModel):
    model_config = ConfigDict(
        extra='allow',
    )
    metadata: Metadata = Field(..., title='BaseArtifactMetadata')
    results: list[Result]
    elapsed_time: float
    args: dict[str, Any] | None = None
