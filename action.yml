name: 'dbt-bouncer'
description: 'Configure and enforce conventions for your dbt project.'
inputs:
  config-file:
    default: 'dbt-bouncer.yml'
    description: 'Location of the YML config file.'
    required: false
  dbt-artifacts-dir:
    default: '.'
    description: 'Directory where the dbt artifacts exists, generally the `target` directory inside a dbt project.'
    required: false

runs:
  using: 'composite'

  steps:
    - name: Setup Python
      uses: actions/setup-python@v5
      with:
          update-environment: false

    - name: Run dbt-bouncer
      shell: bash
      run: |
        wget https://github.com/godatadriven/dbt-bouncer/releases/download/vX.X.X/dbt-bouncer.pex -O ${{ github.action_path }}/dist/dbt-bouncer.pex
        ${{ github.action_path }}/dist/dbt-bouncer.pex  --config-file ${{ inputs.config-file }} --dbt-artifacts-dir ${{ inputs.dbt-artifacts-dir }}
